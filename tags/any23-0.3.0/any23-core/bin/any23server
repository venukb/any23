#!/bin/bash
ANY23_ROOT=$(cd "$(dirname "$0")"; pwd -P)
ANY23_ROOT="$ANY23_ROOT/.."
CP="$ANY23_ROOT/build"
SEP=':'
if [ "$(uname)" = "Cygwin" ]; then SEP=';'; fi
for jar in "$ANY23_ROOT"/lib/*.jar "$ANY23_ROOT"/lib/*/*.jar
do
  if [ ! -e "$jar" ]; then continue; fi
  CP="$CP$SEP$jar"
done
# "$1" -ne "" && 
if [ -n "$1" ]; then 
    if [ "$1" == "-d" ]; then
	    DEBUG_OPTS="-Xdebug -Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=5005"; 
    else
	    echo "Usage $0 [-d]"
	    echo "Where d : debug mode"
	    exit 
    fi
fi
exec java -cp "$CP" -Xmx256M $DEBUG_OPTS org.deri.any23.servlet.Any23Server ../webapp
